"use strict";(self.webpackChunkoutreach_website_frontend=self.webpackChunkoutreach_website_frontend||[]).push([[942],{737:(e,t,n)=>{var a=n(390),i=n(508),s="";function o(e){var t,n;"BUTTON"==e.target.tagName&&[...e.target.classList].includes("remove")&&(e.preventDefault(),e.target.nextSibling.remove(),e.target.remove()),"BUTTON"==e.target.tagName&&[...e.target.classList].includes("add")&&(e.preventDefault(),(t=document.createElement("select")).required=!0,t.innerHTML=s,(n=document.createElement("button")).classList.add("remove"),n.innerHTML="-",(0,i.$)(".leads-input")[0].insertBefore(n,[...(0,i.$)(".leads-input")[0].children].at(-1)),(0,i.$)(".leads-input")[0].insertBefore(t,[...(0,i.$)(".leads-input")[0].children].at(-1)))}fetch(i.backend+"./users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_token:localStorage.getItem("session-token")})}).then(function(){var e=(0,a.Z)((function*(e){200==e.status?(e=(e=yield e.json()).map((e=>'<option value="'.concat(e.user_id,'">').concat(e.name," (").concat(e.email,")</option>"))),(0,i.$)("select")[0].innerHTML+=e.join("\n"),s=(0,i.$)("select")[0].innerHTML,(0,i.$)(".leads-input")[0].on("click",o)):alert("Error ".concat(e.status,"\n").concat(e.statusText))}));return function(){return e.apply(this,arguments)}}()),(0,i.$)("form")[0].on("submit",(e=>{e.preventDefault();var t=[];(0,i.$)("#Community")[0].checked&&t.push("Community"),(0,i.$)("#FIRST")[0].checked&&t.push("FIRST"),(0,i.$)("#STEM")[0].checked&&t.push("STEM");var n={body:{session_token:localStorage.getItem("session-token"),initiative_name:(0,i.$)("#name")[0].value,picture:(0,i.$)("#picture")[0].value,categories:t,leads:(0,i.$)(".leads-input select").map((e=>e.value)),description:(0,i.$)("textarea").value}};console.log(n),fetch(i.backend+"./add-initiative",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_token:localStorage.getItem("session-token"),initiative_name:(0,i.$)("#name")[0].value.trim(),picture:(0,i.$)("#picture")[0].value.trim(),categories:t,leads:(0,i.$)(".leads-input select").map((e=>e.value)),description:(0,i.$)("textarea")[0].value.trim()})}).then((()=>location.href="initiatives.html"))}))},355:()=>{}},e=>{var t=t=>e(e.s=t);t(355),t(737)}]);