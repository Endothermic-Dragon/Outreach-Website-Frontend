"use strict";(self.webpackChunkoutreach_website_frontend=self.webpackChunkoutreach_website_frontend||[]).push([[214],{666:(t,e,n)=>{var a=n(390),r=n(117),i=n.n(r),s=n(508),o=new URLSearchParams(window.location.search).get("user_id")||new URLSearchParams(window.location.search).get("user-id")||localStorage.getItem("user-id");o!=localStorage.getItem("user-id")&&((0,s.$)(".hours span")[1].innerText="This user currently has"),fetch(s.backend+"./user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_token:localStorage.getItem("session-token"),user_id:o})}).then(function(){var t=(0,a.Z)(i().mark((function t(e){var n;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(200==e.status){t.next=3;break}return alert("Error ".concat(e.status,"\n").concat(e.statusText)),t.abrupt("return");case 3:return t.next=5,e.json();case 5:e=t.sent,(0,s.$)(".user-banner img")[0].src=e.profile_picture,(0,s.$)(".user-details div:first-child")[0].innerText=e.name,(0,s.$)(".user-details div a")[0].innerText=e.email,(0,s.$)(".user-details div a")[0].href="mailto:".concat(e.email),e.mins=parseInt(e.initiative_mins)%60,e.hours=Math.floor(parseInt(e.initiative_mins)/60),n=[],1==e.hours?n.push("1 hour"):0!=e.hours&&n.push(e.hours+" hours"),1==e.mins?n.push("1 minute"):0!=e.mins&&n.push(e.mins+" minutes"),(0,s.$)(".hours span")[2].innerText=n.join(", ")||"0 minutes";case 16:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()),(0,s.$)("button")[0].addEventListener("click",(function(){[...(0,s.$)("button")[0].classList].includes("disabled")||((0,s.$)("button")[0].classList.add("disabled"),fetch(s.backend+"./user-initiatives",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_token:localStorage.getItem("session-token"),user_id:o})}).then(function(){var t=(0,a.Z)(i().mark((function t(e){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(200==e.status){t.next=3;break}return alert("Error ".concat(e.status,"\n").concat(e.statusText)),t.abrupt("return");case 3:return t.next=5,e.json();case 5:return e=t.sent,t.next=8,fetch(s.backend+"./translate-initiative-ids",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({initiative_ids:e.initiative_data.map((t=>t.initiative_id))})}).then(function(){var t=(0,a.Z)(i().mark((function t(n){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.json();case 2:n=t.sent,e.initiative_data=e.initiative_data.map(((t,e)=>(t.initiative_name=n[e],t)));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}());case 8:return e=e.initiative_data.map(function(){var t=(0,a.Z)(i().mark((function t(e){var n,a;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.mins=(parseInt(e.duration)%60).toString().padStart(2,"0"),e.hours=Math.floor(parseInt(e.duration)/60),n=new Date(new Date("Jan 1 2020 00:00:00 GMT").getTime()+60*parseInt(e.timestamp)*1e3).toLocaleString().replaceAll(" ","&nbsp;").replace("&nbsp;"," "),a=new Date(new Date("Jan 1 2020 00:00:00 GMT").getTime()+60*parseInt(e.start_time)*1e3).toLocaleString().replaceAll(" ","&nbsp;").replace("&nbsp;"," "),t.abrupt("return",[e.initiative_name,a,"".concat(e.hours,":").concat(e.mins),e.prep_time?"True":"False",n]);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()),t.next=11,Promise.all(e).then((t=>{var e=t.map((t=>(console.log(t),"<tr><td>".concat(t[0],"</td><td>").concat(t[1],"</td><td>").concat(t[2],"</td><td>").concat(t[3],"</td><td>").concat(t[4],"</td></tr>")))).join("");(0,s.$)(".logs")[0].innerHTML="<table><thead><tr><th>Initiative Name</th><th>Start Time</th><th>Hour Logged</th><th>Lead Prep Time</th><th>Record Date</th></tr></thead><tbody>".concat(e,"</tbody></table>")}));case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()))}))},883:()=>{}},t=>{var e=e=>t(t.s=e);e(883),e(666)}]);