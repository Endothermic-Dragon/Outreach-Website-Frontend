"use strict";(self.webpackChunkoutreach_website_frontend=self.webpackChunkoutreach_website_frontend||[]).push([[214],{666:(t,e,n)=>{var i=n(390),a=n(508),s=new URLSearchParams(window.location.search).get("user_id")||new URLSearchParams(window.location.search).get("user-id")||localStorage.getItem("user-id");s!=localStorage.getItem("user-id")&&((0,a.$)(".hours span")[1].innerText="This user currently has"),fetch(a.backend+"./user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_token:localStorage.getItem("session-token"),user_id:s})}).then(function(){var t=(0,i.Z)((function*(t){if(200==t.status){t=yield t.json(),(0,a.$)(".user-banner img")[0].src=t.profile_picture,(0,a.$)(".user-details div:first-child")[0].innerText=t.name,(0,a.$)(".user-details div a")[0].innerText=t.email,(0,a.$)(".user-details div a")[0].href="mailto:".concat(t.email),t.mins=parseInt(t.initiative_mins)%60,t.hours=Math.floor(parseInt(t.initiative_mins)/60);var e=[];1==t.hours?e.push("1 hour"):0!=t.hours&&e.push(t.hours+" hours"),1==t.mins?e.push("1 minute"):0!=t.mins&&e.push(t.mins+" minutes"),(0,a.$)(".hours span")[2].innerText=e.join(", ")||"0 minutes"}else alert("Error ".concat(t.status,"\n").concat(t.statusText))}));return function(){return t.apply(this,arguments)}}()),(0,a.$)("button")[0].addEventListener("click",(function(){[...(0,a.$)("button")[0].classList].includes("disabled")||((0,a.$)("button")[0].classList.add("disabled"),fetch(a.backend+"./user-initiatives",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_token:localStorage.getItem("session-token"),user_id:s})}).then(function(){var t=(0,i.Z)((function*(t){200==t.status?(t=yield t.json(),yield fetch(a.backend+"./translate-initiative-ids",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({initiative_ids:t.initiative_data.map((t=>t.initiative_id))})}).then(function(){var e=(0,i.Z)((function*(e){e=yield e.json(),t.initiative_data=t.initiative_data.map(((t,n)=>(t.initiative_name=e[n],t)))}));return function(){return e.apply(this,arguments)}}()),t=t.initiative_data.map(function(){var t=(0,i.Z)((function*(t){t.mins=(parseInt(t.duration)%60).toString().padStart(2,"0"),t.hours=Math.floor(parseInt(t.duration)/60);var e=new Date(new Date("Jan 1 2020 00:00:00 GMT").getTime()+60*parseInt(t.timestamp)*1e3).toLocaleString().replaceAll(" ","&nbsp;").replace("&nbsp;"," "),n=new Date(new Date("Jan 1 2020 00:00:00 GMT").getTime()+60*parseInt(t.start_time)*1e3).toLocaleString().replaceAll(" ","&nbsp;").replace("&nbsp;"," ");return[t.initiative_name,n,"".concat(t.hours,":").concat(t.mins),t.prep_time?"True":"False",e]}));return function(){return t.apply(this,arguments)}}()),yield Promise.all(t).then((t=>{var e=t.map((t=>(console.log(t),"<tr><td>".concat(t[0],"</td><td>").concat(t[1],"</td><td>").concat(t[2],"</td><td>").concat(t[3],"</td><td>").concat(t[4],"</td></tr>")))).join("");(0,a.$)(".logs")[0].innerHTML="<table><thead><tr><th>Initiative Name</th><th>Start Time</th><th>Hour Logged</th><th>Lead Prep Time</th><th>Record Date</th></tr></thead><tbody>".concat(e,"</tbody></table>")}))):alert("Error ".concat(t.status,"\n").concat(t.statusText))}));return function(){return t.apply(this,arguments)}}()))}))},883:()=>{}},t=>{var e=e=>t(t.s=e);e(883),e(666)}]);