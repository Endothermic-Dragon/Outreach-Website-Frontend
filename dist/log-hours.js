"use strict";(self.webpackChunkoutreach_website_frontend=self.webpackChunkoutreach_website_frontend||[]).push([[91],{497:(e,t,n)=>{var a=n(390),i=n(117),s=n.n(i),o=n(508);function r(){var e=(0,o.$)("select")[0].value;"true"==(0,o.$)('option[value="'.concat(e,'"]'))[0].dataset.lead?(0,o.$)(".vary-disabled")[0].classList.remove("disabled"):((0,o.$)(".vary-disabled")[0].classList.add("disabled"),(0,o.$)("input[type='checkbox']")[0].checked=!1)}function u(e){e.preventDefault(),fetch(o.backend+"./log-hours",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_token:localStorage.getItem("session-token"),initiative_id:(0,o.$)("#initiative")[0].value,prep_time:(0,o.$)("#event-leader")[0].checked,duration:60*parseInt((0,o.$)("#hours")[0].value)+parseInt((0,o.$)("#mins")[0].value),start_time:Math.floor((new Date((0,o.$)("#start-time")[0].value)-new Date("Jan 1 2020 00:00:00 GMT"))/1e3/60)})}).then((()=>location.href="user-dashboard.html"))}(0,o.$)("input[type='number']").onAll("input",(()=>{60*(parseInt((0,o.$)("#hours")[0].value)||0)+(parseInt((0,o.$)("#mins")[0].value)||0)>600?(0,o.$)("#mins")[0].setCustomValidity("Total time must be less than 10 hours."):(0,o.$)("#mins")[0].setCustomValidity("")})),(0,o.$)("#start-time")[0].on("input",((e,t)=>{var n=new Date(t.value),a=(new Date).getTime()-12096e5;(a=(new Date).setTime(a))>n?t.setCustomValidity("You can only log hours for two weeks."):n>new Date?t.setCustomValidity("You can't log hours in the future."):t.setCustomValidity("")})),fetch(o.backend+"./initiatives",{method:"POST",headers:{"Content-Type":"application/json"}}).then(function(){var e=(0,a.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:t=(t=e.sent).map((e=>'<option value="'.concat(e.initiative_id,'" data-lead="').concat(e.leads.includes(localStorage.getItem("user-id")),'">').concat(e.initiative_name,"</option>"))),(0,o.$)("select")[0].innerHTML+=t.join("\n"),(0,o.$)("select")[0].on("change",r),(0,o.$)("form")[0].on("submit",u);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}())},941:()=>{}},e=>{var t=t=>e(e.s=t);t(941),t(497)}]);