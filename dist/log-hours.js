"use strict";(self.webpackChunkoutreach_website_frontend=self.webpackChunkoutreach_website_frontend||[]).push([[91],{497:(e,t,a)=>{var n=a(390),i=a(508);function s(){var e=(0,i.$)("select")[0].value;"true"==(0,i.$)('option[value="'.concat(e,'"]'))[0].dataset.lead?(0,i.$)(".vary-disabled")[0].classList.remove("disabled"):((0,i.$)(".vary-disabled")[0].classList.add("disabled"),(0,i.$)("input[type='checkbox']")[0].checked=!1)}function o(e){e.preventDefault(),fetch(i.backend+"./log-hours",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_token:localStorage.getItem("session-token"),initiative_id:(0,i.$)("#initiative")[0].value,prep_time:(0,i.$)("#event-leader")[0].checked,duration:60*parseInt((0,i.$)("#hours")[0].value)+parseInt((0,i.$)("#mins")[0].value),start_time:Math.floor((new Date((0,i.$)("#start-time")[0].value)-new Date("Jan 1 2020 00:00:00 GMT"))/1e3/60)})}).then((()=>location.href="user-dashboard.html"))}(0,i.$)("input[type='number']").onAll("input",(()=>{60*(parseInt((0,i.$)("#hours")[0].value)||0)+(parseInt((0,i.$)("#mins")[0].value)||0)>600?(0,i.$)("#mins")[0].setCustomValidity("Total time must be less than 10 hours."):(0,i.$)("#mins")[0].setCustomValidity("")})),(0,i.$)("#start-time")[0].on("input",((e,t)=>{var a=new Date(t.value),n=(new Date).getTime()-12096e5;(n=(new Date).setTime(n))>a?t.setCustomValidity("You can only log hours for two weeks."):a>new Date?t.setCustomValidity("You can't log hours in the future."):t.setCustomValidity("")})),fetch(i.backend+"./initiatives",{method:"POST",headers:{"Content-Type":"application/json"}}).then(function(){var e=(0,n.Z)((function*(e){e=(e=yield e.json()).map((e=>'<option value="'.concat(e.initiative_id,'" data-lead="').concat(e.leads.includes(localStorage.getItem("user-id")),'">').concat(e.initiative_name,"</option>"))),(0,i.$)("select")[0].innerHTML+=e.join("\n"),(0,i.$)("select")[0].on("change",s),(0,i.$)("form")[0].on("submit",o)}));return function(){return e.apply(this,arguments)}}())},941:()=>{}},e=>{var t=t=>e(e.s=t);t(941),t(497)}]);